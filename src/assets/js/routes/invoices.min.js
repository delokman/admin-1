!function(){"use strict";var o=window.tabId,C=window.ecomUtils,E=window.lang,e=function(){var e=$("#app-tab-"+o),f=e.find("#invoice-id"),b=e.find("#invoice-to"),_=e.find("#invoice-from"),h=e.find("#createdAt"),y=e.find("#updatedAt"),g=e.find("#itemsOrder"),x=e.find("#subTotalOrder"),v=e.find("#freightOrder"),w=e.find("#discountOrder"),R=e.find("#taxOrder"),M=e.find("#extraOrder"),P=e.find("#totalOrder"),O=e.find("#shippingMethod"),B=e.find("#paymentMethod"),L=e.find("#noteOrder"),A=e.find("#coupon"),n=window.location.href.split("/"),t="orders/"+n[n.length-1]+".json";window.callApi("stores/me.json","GET",function(e,n){if(!e){var t,o;console.log(n);var a=n.contact_email||"";t=n.contact_phone?formatPhone(C.parsePhone(n.contact_phone)):"",o="CNPJ"===n.doc_type?n.doc_number.replace(/(\d{2})(\d{3})(\d{3})\/(\d{4})(\d{2})/,"$1.$2.$3.$4-$5"):n.doc_number.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4");var r=n.corporate_name||n.name;if(n.logo.url)var i=n.logo.url;console.log(i),console.log(r),_.append('<img src="'+i+'"><br><br><strong>'+r+"</strong><br><strong>"+n.doc_type+" : "+o+"</strong><br><span>"+a+"</span> <br><span>"+t+"</span> ")}}),window.callApi(t,"GET",function(e,n){if(!e){console.log(n),h.text(C.formatDate(n.created_at)),y.text(C.formatDate(n.updated_at)||"Não houve atualização ainda"),f.text(n.number);var t,o,a,r,i,s=n.staff_notes||n.notes||"Nenhuma observação";if(L.text(s),n.amount&&(x.text(C.formatMoney(n.amount.subtotal,"BRL",E)||"R$ 0,00"),v.text(C.formatMoney(n.amount.freight,"BRL",E)||"R$ 0,00"),w.text(C.formatMoney(n.amount.discount,"BRL",E)||"R$ 0,00"),M.text(C.formatMoney(n.amount.extra,"BRL",E)||"R$ 0,00"),R.text(C.formatMoney(n.amount.tax,"BRL",E)||"R$ 0,00"),P.text(C.formatMoney(n.amount.total,"BRL",E))),n.items)for(var d=0;d<n.items.length;d++)g.append("<tr><td>"+(d+1)+"</td>  <td>"+n.items[d].name+"/ ("+n.items[d].sku+")</td>  <td>"+n.items[d].quantity+"</td>  <td>"+C.formatMoney(n.items[d].price,n.items[d].currency_id||"BRL",E)+"</td>  <td>"+C.formatMoney(n.items[d].final_price*n.items[d].quantity,n.items[d].currency_id||"BRL",E)+"</td></tr>");if(O.text(n.shipping_method_label),n.transactions&&(n.transactions[0].app?n.transactions[0].app.intermediator?B.text(n.transactions[0].app.intermediator.name):B.text(n.transactions[0].app.label):B.text(n.payment_method_label)),n.shipping_lines)if(n.shipping_lines[0].app){var p=n.shipping_lines[0].app.carrier+" | "+n.shipping_lines[0].app.label;O.text(p)}else O.text(n.shipping_method_label);if(n.extra_discount?n.extra_discount.discount_coupon?A.text(n.extra_discount.discount_coupon):A.text("Outra forma de desconto"):A.text("Nenhum uso de cupom"),n.buyers&&(a="p"===n.buyers[0].registry_type?(t=n.buyers[0].name.middle_name?n.buyers[0].name.given_name+" "+n.buyers[0].name.middle_name+" "+n.buyers[0].name.family_name:n.buyers[0].name.given_name+" "+n.buyers[0].name.family_name,o="CPF",n.buyers[0].doc_number.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")):(t=n.buyers[0].corporate_name,o="CNPJ",n.buyers[0].doc_number.replace(/(\d{2})(\d{3})(\d{3})\/(\d{4})(\d{2})/,"$1.$2.$3.$4-$5")),r=n.buyers[0].main_email,n.buyers[0].phones&&(1<n.buyers[0].phones.length&&(i="<span>"+formatPhone(n.buyers[0].phones[0])+"<br>"+formatPhone(n.buyers[0].phones[1])+" </span>"),1===n.buyers[0].phones.length&&(i="<span>"+formatPhone(n.buyers[0].phones[0])+" </span>"))),n.shipping_lines)var m=n.shipping_lines[0].to.zip,u=C.lineAddress(n.shipping_lines[0].from)||"",c=C.lineAddress(n.shipping_lines[0].to)||"",l=n.shipping_lines[0].from.zip;b.append("<strong> "+t+"</strong><br>    <strong> "+o+":"+a+"</strong><br>    <span>CEP: "+m+"</span><br>    <span>Endereço: "+c+"</span><br>    <span>"+r+"</span>     <br>     <span>"+i+"</span>"),setTimeout(function(){_.append("<br><span> CEP: "+l+"</span><br>    <span>"+u+"</span><br>")},500)}})};window.Tabs[o].$form?e():$(document).one("form-"+o,e)}();