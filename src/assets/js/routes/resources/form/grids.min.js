!function(){"use strict";var n=window.tabId,p=window.Tabs[n],e=p.commit,s=function(){return p.data},d=window.i18n,u=d({en_us:"Color",pt_br:"Cor"});p.continue=function(){var a=$("#t"+n+"-options-list"),c=randomObjectId(),l=0,r='<div class="input-group"><div class="input-group-prepend"><span class="input-group-text"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input"><label class="custom-control-label"> </label></div></span></div><input class="form-control" type="text" name="options." data-json="true" data-object-assign="true"><span class="input-group-append"><button class="btn btn-light" type="button"><i class="fa fa-cog"></i></button></span></div><div class="mt-10 hidden edit-option"><div class="mb-10 row no-gutters"><div class="col mr-2"><input type="text" class="form-control colorpicker" name="options.colors[].0" placeholder="'+u+' 1"></div><div class="col mr-2"><input type="text" class="form-control colorpicker" name="options.colors[].1" placeholder="'+u+' 2"></div><div class="col"><input type="text" class="form-control colorpicker" name="options.colors[].2" placeholder="'+u+' 3"></div></div><a class="i18n" href="javascript:;" onclick="$(this).next().slideToggle()"><span data-lang="en_us">+ Option\'s additional cost</span><span data-lang="pt_br">+ Custo adicional da opção</span></a><div class="hidden mt-10">'+$("#t"+n+"-add-to-price").html().replace(/(add_to_price)/g,"options.$1")+"</div></div>",t=function(t){var o,i=$("<li />",{html:r});a.append(i),o=t?t._id:objectIdPad(c,""+l),l++;var n=i.find("input");n.data("object-id",o);var e=n.filter('[name="options."]');if(e.change(function(){var t=$(this).val();if(""!==t.trim())if(1===t.length){var o="0"+t;$(this).data("value",JSON.stringify({text:t,option_id:clearAccents(o.toLowerCase(),"_").replace(/[^a-z0-9_]/g,"").substr(0,30)}))}else $(this).data("value",JSON.stringify({text:t,option_id:clearAccents(t.toLowerCase(),"_").replace(/[^a-z0-9_]/g,"").substr(0,30)}));else $(this).data("value","")}),n.filter(".colorpicker").minicolors({theme:"bootstrap"}),handleInputs(i,p.inputToData),i.find("button").click(function(){i.find(".edit-option").slideToggle()}),i.slideDown(400,function(){t||e.focus()}),t&&(e.val(t.text).data("value",JSON.stringify(t)),t.colors))for(var s=0;s<t.colors.length;s++)n.filter('[name="options.colors[].'+s+'"]').minicolors("value",t.colors[s])};$("#t"+n+"-add-option").click(function(){t()}),a.next().find("a").click(function(){t()}),$("#t"+n+"-delete-options").click(function(){var t=a.find("input:checked");if(t.length){var o=s();t.each(function(){if(o.options){for(var t=0;t<o.options.length;t++)o.options[t]._id===$(this).data("object-id")&&o.options.splice(t,1);o.options.length||delete o.options,e(o,!0)}$(this).closest("li").slideUp(400,function(){$(this).remove()})})}else app.toast(d({en_us:"Select the options to delete",pt_br:"Selecione as opções para deletar"}))});var o=s();if(o.options)for(var i=0;i<o.options.length;i++)t(o.options[i]);p.formSetup()}}();