!function(){"use strict";var O=window.lang,j=window.tabId,z=window.Tabs[j],x=z.commit,C=function(){return z.data},a=function(){var a=$("#t"+j+"-info-customer"),n=a.find("#t"+j+"-registry-type").find('input[name="registry_type"]'),e=a.find("#t"+j+"-physical"),t=a.find("#t"+j+"-juridical"),s=a.find("#t"+j+"-inscription-number"),i=a.find("#t"+j+"-birth-date").find("#t"+j+"-birth"),d=$("#t"+j+"-info-personal").find("#t"+j+"-full-name"),r=e.find("#t"+j+"-cpf"),p=t.find("#t"+j+"-cnpj"),o=a.find("#t"+j+"-groupPhones"),l=0,c=$("#t"+j+"-staff-notes").find("#t"+j+"-note"),f=$("#t"+j+"-abstract"),u=f.find("#t"+j+"-personalAbs"),h=f.find("#t"+j+"-statisAbs"),m=function(a){var n=$("<div />",{class:"input-group pb-10",html:[$("<div />",{class:"input-group-prepend",html:[$("<button>",{class:"btn btn-light delete-options",html:[$("<i />",{class:"fa fa-trash"})]})]}),$("<input>",{class:"form-control country-code",type:"tel",name:"phones[]."+l+".country_code","data-is-number":"true"}),$("<input>",{class:"form-control w-120px",type:"tel",name:"phones[]."+l+".number","data-mask":"tel","data-numeric-string":"true"})]});o.append(n),l++,handleInputs(n,z.inputToData),setupInputValues(n,w[k].number,"phones.")};n.change(function(){"p"===this.value?(e.show(),t.hide(),s.hide()):(e.hide(),t.show(),s.show())}),r.change(function(){var a=C(),n=r.val().replace(/(\d{3}).(\d{3}).(\d{3})-(\d{2})/,"$1$2$3$4");console.log(n),a.doc_number=n,x(a,!0)}),p.change(function(){var a=C(),n=p.val().replace(/(\d{2}).(\d{3}).(\d{3})\/(\d{4})-(\d{2})/,"$1$2$3$4$5");console.log(n),a.doc_number=n,x(a,!0)}),d.change(function(){var a=C(),n=d.val().split(" "),e=n.length;if(0<e){for(var t=n[0],s=n[e-1],i="",r=1;r<n.length-1;r++)""!==i&&(i+=" "),i+=n[r];a.hasOwnProperty("name")||(a.name={}),a.name.given_name=t,a.name.family_name=s,a.name.middle_name=i,x(a,!0)}else a.name={},x(a,!0)});var _,b=C();b.name&&(_=b.name.middle_name?b.name.given_name+" "+b.name.middle_name+" "+b.name.family_name:b.name.given_name+" "+b.name.family_name,d.val(_));if(b.birth_date){var g=b.birth_date.day,v=b.birth_date.month;if(b.birth_date.day<10&&(g="0"+b.birth_date.day),b.birth_date.month<10&&(v="0"+b.birth_date.month),"pt_br"===O){var y=g+"/"+v+"/"+b.birth_date.year;i.val(y)}else y=v+"/"+g+"/"+b.birth_date.year,i.val(y)}if(b.phones)for(var w=b.phones,k=0;k<w.length;k++)m();b.staff_notes&&c.val(b.staff_notes),i.change(function(){var a=C(),n=i.val().split(/(\d{2})\/(\d{2})\/(\d{4})/).filter(String);if(a.hasOwnProperty("birth_date"))a.birth_date={},x(a,!0);else if(a.birth_date={},"pt_br"===O){var e=parseInt(n[0]),t=parseInt(n[1]),s=parseInt(n[2]);a.birth_date.day=e,a.birth_date.month=t,a.birth_date.year=s,x(a,!0)}else e=parseInt(n[1]),t=parseInt(n[0]),s=parseInt(n[2]),a.birth_date.day=e,a.birth_date.month=t,a.birth_date.year=s,x(a,!0)}),e.find("#t"+j+"-cpf").inputmask("999.999.999-99"),t.find("#t"+j+"-cnpj").inputmask("99.999.999/9999-99"),o.find(".country-code").inputmask("+99"),$("#t"+j+"-add-option").click(function(){m()}),o.find(".delete-options").click(function(){var a=C();if(a.phones)for(var n=0;n<a.phones.length;n++)a.phones[n]&&a.phones.splice(1,n);$(this).closest("button").parent().parent().slideUp(400,function(){$(this).remove()}),x(a,!0)});var N=$("#t"+j+"-customer-shipping");if(handleNestedObjects(C,x,N,$("#t"+j+"-add-shipping"),$("#t"+j+"-delete-shipping"),$("#t"+j+"-next-shipping"),"addresses",function(a){var n,e=C(),t=function(a){return!0===a.default};if(e.addresses)for(var s=0;s<e.addresses.length;s++){if(e.addresses[s].default){n=e.addresses.filter(t);break}n=e.addresses[0]}a.zip=Object.assign({zip:"00000000"},n),delete a.zip.default,delete a.zip._id}),$("div[data-link-collapse]").each(function(){var a=$(this),e=a.children("div"),t=a.children("em"),n=function(){var n="";e.find("input").each(function(){var a=$(this).val();("string"==typeof a&&""!==a.trim()||"number"==typeof a)&&(n+=a+", ")}),t.text(n.slice(0,-2))};a.children("a").click(function(){e.slideToggle("slow"),n(),t.slideToggle()}),n()}),c.change(function(){var a=C(),n=c.val();a.hasOwnProperty("staff_notes")?a.staff_notes={}:(a.staff_notes={},a.staff_notes=n,x(a,!0))}),b.gender){if("f"===b.gender)var I='<span class="i18n">       <span data-lang="en_us">Female</span>       <span data-lang="pt_br">Feminino</span>      </span> ';else"m"===b.gender&&(I='<span class="i18n">       <span data-lang="en_us">Male</span>       <span data-lang="pt_br">Masculino</span>      </span> ');"x"===b.gender&&(I='<span class="i18n">       <span data-lang="en_us">Others</span>       <span data-lang="pt_br">Outros</span>      </span> ')}if(u.append('<span class="i18n">       <span data-lang="en_us">Name</span>       <span data-lang="pt_br">Nome</span>      </span>: '+_+'<br><span class="i18n">       <span data-lang="en_us">Birth Date</span>       <span data-lang="pt_br">Data de Nascimento</span>      </span>: '+y+'<br><span class="i18n">       <span data-lang="en_us">Gender</span>       <span data-lang="pt_br">Gênero</span>      </span>: '+(I||"Não configurado")+'<br><span class="i18n">       <span data-lang="en_us">CPF/CNPJ</span>       <span data-lang="pt_br">CPF/CNPJ</span>      </span>: '+window.maskDocNumber(b)),h.append('<span class="i18n">       <span data-lang="en_us">Number of orders</span>       <span data-lang="pt_br">Quantidade de pedidos</span>      </span>: '+(b.orders_count||"Nenhum pedido realizado")+'<br><span class="i18n">       <span data-lang="en_us">Amount of money in order: </span>       <span data-lang="pt_br">Valor total de pedidos: </span>      </span>'+(window.ecomUtils.formatMoney(b.orders_total_value,b.currency_id)||"0")+'<br><span class="i18n"> '),b.orders_count)for(var P=0;P<b.orders.length;P++)h.append('<span class="i18n">       <span data-lang="en_us">Order</span>       <span data-lang="pt_br">Pedido</span>      </span>: <a href="/#/resources/orders/'+b.orders[P]._id+'">'+b.orders[P].number+'</a><br><span class="i18n"> ')};z.$form?a():$(document).one("form-"+j,a)}();