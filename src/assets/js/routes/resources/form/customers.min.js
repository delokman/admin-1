!function(){"use strict";var y=window.tabId,w=window.Tabs[y],k=w.commit,I=function(){return w.data},e=function(){var e=$("#t"+y+"-info-customer"),n=e.find("#t"+y+"-registry-type").find('input[name="registry_type"]'),t=e.find("#t"+y+"-physical"),i=e.find("#t"+y+"-juridical"),a=e.find("#t"+y+"-inscription-number"),d=e.find("#t"+y+"-birth-date").find("#t"+y+"-birth"),s=$("#t"+y+"-info-personal").find("#t"+y+"-full-name"),r=t.find("#t"+y+"-cpf"),o=i.find("#t"+y+"-cnpj"),l=e.find("#t"+y+"-groupPhones"),p=0,c=function(e){var n=$("<div />",{class:"input-group pb-10",html:[$("<div />",{class:"input-group-prepend",html:[$("<button>",{class:"btn btn-light delete-options",html:[$("<i />",{class:"fa fa-trash"})]})]}),$("<input>",{class:"form-control country-code",type:"tel",name:"phones[]."+p+".country_code","data-is-number":"true"}),$("<input>",{class:"form-control w-120px",type:"tel",name:"phones[]."+p+".number","data-mask":"tel","data-numeric-string":"true"})]});l.append(n),p++,handleInputs(n,w.inputToData),setupInputValues(n,g[b].number,"phones.")};n.change(function(){"p"===this.value?(t.show(),i.hide(),a.hide()):(t.hide(),i.show(),a.show())}),r.change(function(){var e=I(),n=r.val().replace(/(\d{3}).(\d{3}).(\d{3})-(\d{2})/,"$1$2$3$4");console.log(n),e.doc_number=n,k(e,!0)}),o.change(function(){var e=I(),n=o.val().replace(/(\d{2}).(\d{3}).(\d{3})\/(\d{4})-(\d{2})/,"$1$2$3$4$5");console.log(n),e.doc_number=n,k(e,!0)}),s.change(function(){var e=I(),n=s.val().split(" "),t=n.length;if(0<t){for(var i=n[0],a=n[t-1],d="",r=1;r<n.length-1;r++)""!==d&&(d+=" "),d+=n[r];e.hasOwnProperty("name")||(e.name={}),e.name.given_name=i,e.name.family_name=a,e.name.middle_name=d,k(e,!0)}else e.name={},k(e,!0)});var h=I();if(h.name){var f=h.name.given_name+" "+h.name.middle_name+" "+h.name.family_name;s.val(f)}if(h.birth_date){var u=h.birth_date.day,m=h.birth_date.month;h.birth_date.day<10&&(u="0"+h.birth_date.day),h.birth_date.month<10&&(m="0"+h.birth_date.month);var v=u+"/"+m+"/"+h.birth_date.year;d.val(v)}if(h.phones)for(var g=h.phones,b=0;b<g.length;b++)c();d.change(function(){var e=I(),n=d.val().split(/(\d{2})\/(\d{2})\/(\d{4})/).filter(String),t=parseInt(n[0]),i=parseInt(n[1]),a=parseInt(n[2]);e.birth_date.day=t,e.birth_date.month=i,e.birth_date.year=a,k(e,!0)}),t.find("#t"+y+"-cpf").inputmask("999.999.999-99"),i.find("#t"+y+"-cnpj").inputmask("99.999.999/9999-99"),l.find(".country-code").inputmask("+99"),$("#t"+y+"-add-option").click(function(){c()}),l.find(".delete-options").click(function(){var e=I();if(e.phones)for(var n=0;n<e.phones.length;n++)e.phones[n]&&e.phones.splice(1,n);$(this).closest("button").parent().parent().slideUp(400,function(){$(this).remove()}),k(e,!0)});var _=$("#t"+y+"-order-shipping");handleNestedObjects(I,k,_,$("#t"+y+"-add-shipping"),$("#t"+y+"-delete-shipping"),$("#t"+y+"-next-shipping"),"addresses",function(e){var n,t=I();if(t.addresses)for(var i=0;i<t.addresses.length;i++){if(t.addresses[i].default){n=t.addresses[i];break}n||(n=t.addresses[0])}e.zip=Object.assign({zip:"00000000"},n),delete e.zip.default,delete e.zip._id}()),$("div[data-link-collapse]").each(function(){var e=$(this),t=e.children("div"),i=e.children("em"),n=function(){var n="";t.find("input").each(function(){var e=$(this).val();("string"==typeof e&&""!==e.trim()||"number"==typeof e)&&(n+=e+", ")}),i.text(n.slice(0,-2))};e.children("a").click(function(){t.slideToggle("slow"),n(),i.slideToggle()}),n()})};w.$form?e():$(document).one("form-"+y,e)}();