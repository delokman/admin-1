!function(){"use strict";var O=window.lang,j=window.tabId,z=window.Tabs[j],A=z.commit,M=function(){return z.data},a=function(){var a=$("#t"+j+"-info-customer"),n=a.find("#t"+j+"-registry-type").find('input[name="registry_type"]'),e=a.find("#t"+j+"-physical"),t=a.find("#t"+j+"-juridical"),s=a.find("#t"+j+"-inscription-number"),r=a.find("#t"+j+"-birth-date").find("#t"+j+"-birth"),i=$("#t"+j+"-info-personal").find("#t"+j+"-full-name"),d=e.find("#t"+j+"-cpf"),p=t.find("#t"+j+"-cnpj"),o=a.find("#t"+j+"-groupPhones"),l=0,c=$("#t"+j+"-staff-notes").find("#t"+j+"-note"),f=$("#t"+j+"-abstract"),u=f.find("#t"+j+"-personalAbs"),m=f.find("#t"+j+"-statisAbs"),h=function(a){var n=$("<div />",{class:"input-group pb-10",html:[$("<div />",{class:"input-group-prepend",html:[$("<button>",{class:"btn btn-light delete-options",html:[$("<i />",{class:"fa fa-trash"})]})]}),$("<input>",{class:"form-control country-code",type:"tel",name:"phones[]."+l+".country_code","data-is-number":"true"}),$("<input>",{class:"form-control w-120px",type:"tel",name:"phones[]."+l+".number","data-mask":"tel","data-numeric-string":"true"})]});o.append(n),l++,handleInputs(n,z.inputToData),setupInputValues(n,w[k].number,"phones.")};n.change(function(){"p"===this.value?(e.show(),t.hide(),s.hide()):(e.hide(),t.show(),s.show())}),d.change(function(){var a=M(),n=d.val().replace(/(\d{3}).(\d{3}).(\d{3})-(\d{2})/,"$1$2$3$4");console.log(n),a.doc_number=n,A(a,!0)}),p.change(function(){var a=M(),n=p.val().replace(/(\d{2}).(\d{3}).(\d{3})\/(\d{4})-(\d{2})/,"$1$2$3$4$5");console.log(n),a.doc_number=n,A(a,!0)}),i.change(function(){var a=M(),n=i.val().split(" "),e=n.length;if(0<e){for(var t=n[0],s=n[e-1],d="",r=1;r<n.length-1;r++)""!==d&&(d+=" "),d+=n[r];a.hasOwnProperty("name")||(a.name={}),a.name.given_name=t,a.name.family_name=s,a.name.middle_name=d,A(a,!0)}else a.name={},A(a,!0)});var _,g=M();g.name&&(_=g.name.middle_name?g.name.given_name+" "+g.name.middle_name+" "+g.name.family_name:g.name.given_name+" "+g.name.family_name,i.val(_));if(g.birth_date){var b=g.birth_date.day,v=g.birth_date.month;if(g.birth_date.day<10&&(b="0"+g.birth_date.day),g.birth_date.month<10&&(v="0"+g.birth_date.month),"pt_br"===O){var y=b+"/"+v+"/"+g.birth_date.year;r.val(y)}else y=v+"/"+b+"/"+g.birth_date.year,r.val(y)}if(g.phones)for(var w=g.phones,k=0;k<w.length;k++)h();g.staff_notes&&c.val(g.staff_notes),r.change(function(){var a=M(),n=r.val().split(/(\d{2})\/(\d{2})\/(\d{4})/);console.log(n);var e=n.filter(String);if(console.log(e),a.hasOwnProperty("birth_date"))a.birth_date={},A(a,!0);else if(a.birth_date={},"pt_br"===O){var t=parseInt(e[0]),s=parseInt(e[1]),d=parseInt(e[2]);a.birth_date.day=t,a.birth_date.month=s,a.birth_date.year=d,A(a,!0)}else t=parseInt(e[1]),s=parseInt(e[0]),d=parseInt(e[2]),a.birth_date.day=t,a.birth_date.month=s,a.birth_date.year=d,A(a,!0)}),e.find("#t"+j+"-cpf").inputmask("999.999.999-99"),t.find("#t"+j+"-cnpj").inputmask("99.999.999/9999-99"),o.find(".country-code").inputmask("+99"),$("#t"+j+"-add-option").click(function(){h()}),o.find(".delete-options").click(function(){var a=M();if(a.phones)for(var n=0;n<a.phones.length;n++)a.phones[n]&&a.phones.splice(1,n);$(this).closest("button").parent().parent().slideUp(400,function(){$(this).remove()}),A(a,!0)});var I=$("#t"+j+"-customer-shipping");handleNestedObjects(M,A,I,$("#t"+j+"-add-shipping"),$("#t"+j+"-delete-shipping"),$("#t"+j+"-next-shipping"),"addresses",function(a){var n,e=M(),t=function(a){return!0===a.default};if(e.addresses)for(var s=0;s<e.addresses.length;s++){if(e.addresses[s].default){n=e.addresses.filter(t);break}n=e.addresses[0]}a.zip=Object.assign({zip:"00000000"},n),delete a.zip.default,delete a.zip._id}),$("div[data-link-collapse]").each(function(){var a=$(this),e=a.children("div"),t=a.children("em"),n=function(){var n="";e.find("input").each(function(){var a=$(this).val();("string"==typeof a&&""!==a.trim()||"number"==typeof a)&&(n+=a+", ")}),t.text(n.slice(0,-2))};a.children("a").click(function(){e.slideToggle("slow"),n(),t.slideToggle()}),n()});if(c.change(function(){var a=M(),n=c.val();a.hasOwnProperty("staff_notes")?a.staff_notes={}:(a.staff_notes={},a.staff_notes=n,A(a,!0))}),console.log(g),g.gender){if("f"===g.gender)var N='<span class="i18n">       <span data-lang="en_us">Female</span>       <span data-lang="pt_br">Feminino</span>      </span> ';else"m"===g.gender&&(N='<span class="i18n">       <span data-lang="en_us">Male</span>       <span data-lang="pt_br">Masculino</span>      </span> ');"x"===g.gender&&(N='<span class="i18n">       <span data-lang="en_us">Others</span>       <span data-lang="pt_br">Outros</span>      </span> ')}if(u.append('<span class="i18n">       <span data-lang="en_us">Name</span>       <span data-lang="pt_br">Nome</span>      </span>: '+_+'<br><span class="i18n">       <span data-lang="en_us">Birth Date</span>       <span data-lang="pt_br">Data de Nascimento</span>      </span>: '+y+'<br><span class="i18n">       <span data-lang="en_us">Gender</span>       <span data-lang="pt_br">Gênero</span>      </span>: '+(N||"Não configurado")+'<br><span class="i18n">       <span data-lang="en_us">CPF/CNPJ</span>       <span data-lang="pt_br">CPF/CNPJ</span>      </span>: '+(g.registry_type,g.doc_number,"j"===g.doc_type?g.doc_number.replace(/(\d{2})(\d{3})(\d{3})\/(\d{4})(\d{2})/,"$1.$2.$3.$4-$5"):g.doc_number.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"))),m.append('<span class="i18n">       <span data-lang="en_us">Number of orders</span>       <span data-lang="pt_br">Quantidade de pedidos</span>      </span>: '+(g.orders_count||"Nenhum pedido realizado")+'<br><span class="i18n">       <span data-lang="en_us">Amount of money in order: </span>       <span data-lang="pt_br">Valor total de pedidos: </span>      </span>'+(window.ecomUtils.formatMoney(g.orders_total_value,g.currency_id)||"0")+'<br><span class="i18n">       <span data-lang="en_us">Amount of money spent: </span>       <span data-lang="pt_br">Valor total de pedidos aprovados: </span>      </span>'+(window.ecomUtils.formatMoney(g.total_spent,g.currency_id)||"0")+'<br><span class="i18n">       <span data-lang="en_us">Amount of money cancelled: </span>       <span data-lang="pt_br">Valor total de pedidos cancelados: </span>      </span>'+(window.ecomUtils.formatMoney(g.total_cancelled,g.currency_id)||"0")+"<br>"),g.orders_count)for(var P=0;P<g.orders.length;P++)m.append('<span class="i18n">       <span data-lang="en_us">Order</span>       <span data-lang="pt_br">Pedido</span>      </span>: <a href="/#/resources/orders/'+g.orders[P]._id+'">'+g.orders[P].number+'</a><br><span class="i18n"> ')};z.$form?a():$(document).one("form-"+j,a)}();