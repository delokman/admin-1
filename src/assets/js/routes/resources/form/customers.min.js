!function(){"use strict";var N=window.lang,O=window.tabId,j=window.Tabs[O],A=j.commit,x=function(){return j.data},a=function(){var a=$("#t"+O+"-info-customer"),n=a.find("#t"+O+"-registry-type").find('input[name="registry_type"]'),e=a.find("#t"+O+"-physical"),t=a.find("#t"+O+"-juridical"),s=a.find("#t"+O+"-inscription-number"),d=a.find("#t"+O+"-birth-date").find("#t"+O+"-birth"),p=$("#t"+O+"-info-personal").find("#t"+O+"-full-name"),i=e.find("#t"+O+"-cpf"),r=t.find("#t"+O+"-cnpj"),o=a.find("#t"+O+"-groupPhones"),l=0,c=$("#t"+O+"-staff-notes").find("#t"+O+"-note"),f=$("#t"+O+"-abstract"),u=f.find("#t"+O+"-personalAbs"),h=f.find("#t"+O+"-statisAbs"),m=function(a){var n=$("<div />",{class:"input-group pb-10",html:[$("<div />",{class:"input-group-prepend",html:[$("<button>",{class:"btn btn-light delete-options",html:[$("<i />",{class:"fa fa-trash"})]})]}),$("<input>",{class:"form-control country-code",type:"tel",name:"phones[]."+l+".country_code","data-is-number":"true"}),$("<input>",{class:"form-control w-120px",type:"tel",name:"phones[]."+l+".number","data-mask":"tel","data-numeric-string":"true"})]});o.append(n),l++,handleInputs(n,j.inputToData),setupInputValues(n,w[k].number,"phones.")};n.change(function(){"p"===this.value?(e.show(),t.hide(),s.hide()):(e.hide(),t.show(),s.show())}),i.change(function(){var a=x(),n=i.val().replace(/(\d{3}).(\d{3}).(\d{3})-(\d{2})/,"$1$2$3$4");console.log(n),a.doc_number=n,A(a,!0)}),r.change(function(){var a=x(),n=r.val().replace(/(\d{2}).(\d{3}).(\d{3})\/(\d{4})-(\d{2})/,"$1$2$3$4$5");console.log(n),a.doc_number=n,A(a,!0)}),p.change(function(){var a=x(),n=p.val().split(" "),e=n.length;if(0<e){for(var t=n[0],s=n[e-1],i="",d=1;d<n.length-1;d++)""!==i&&(i+=" "),i+=n[d];a.hasOwnProperty("name")||(a.name={}),a.name.given_name=t,a.name.family_name=s,a.name.middle_name=i,A(a,!0)}else a.name={},A(a,!0)});var _,g=x();g.name&&(_=g.name.middle_name?g.name.given_name+" "+g.name.middle_name+" "+g.name.family_name:g.name.given_name+" "+g.name.family_name,p.val(_));if(g.birth_date){var b=g.birth_date.day,v=g.birth_date.month;if(g.birth_date.day<10&&(b="0"+g.birth_date.day),g.birth_date.month<10&&(v="0"+g.birth_date.month),"pt_br"===N){var y=b+"/"+v+"/"+g.birth_date.year;d.val(y)}else y=v+"/"+b+"/"+g.birth_date.year,d.val(y)}if(g.phones)for(var w=g.phones,k=0;k<w.length;k++)m();g.staff_notes&&c.val(g.staff_notes),d.change(function(){var a=x(),n=d.val().split(/(\d{2})\/(\d{2})\/(\d{4})/);console.log(n);var e=n.filter(String);if(console.log(e),a.hasOwnProperty("birth_date"))a.birth_date={},A(a,!0);else if(a.birth_date={},"pt_br"===N){var t=parseInt(e[0]),s=parseInt(e[1]),i=parseInt(e[2]);a.birth_date.day=t,a.birth_date.month=s,a.birth_date.year=i,A(a,!0)}else t=parseInt(e[1]),s=parseInt(e[0]),i=parseInt(e[2]),a.birth_date.day=t,a.birth_date.month=s,a.birth_date.year=i,A(a,!0)}),e.find("#t"+O+"-cpf").inputmask("999.999.999-99"),t.find("#t"+O+"-cnpj").inputmask("99.999.999/9999-99"),o.find(".country-code").inputmask("+99"),$("#t"+O+"-add-option").click(function(){m()}),o.find(".delete-options").click(function(){var a=x();if(a.phones)for(var n=0;n<a.phones.length;n++)a.phones[n]&&a.phones.splice(1,n);$(this).closest("button").parent().parent().slideUp(400,function(){$(this).remove()}),A(a,!0)});var I=$("#t"+O+"-customer-shipping");if(handleNestedObjects(x,A,I,$("#t"+O+"-add-shipping"),$("#t"+O+"-delete-shipping"),$("#t"+O+"-next-shipping"),"addresses",function(a){var n,e=x();if(e.addresses)for(var t=0;t<e.addresses.length;t++){if(e.addresses[t].default){n=e.addresses[t];break}n||(n=e.addresses[0])}a.zip=Object.assign({zip:"00000000"},n),delete a.zip.default,delete a.zip._id}),$("div[data-link-collapse]").each(function(){var a=$(this),e=a.children("div"),t=a.children("em"),n=function(){var n="";e.find("input").each(function(){var a=$(this).val();("string"==typeof a&&""!==a.trim()||"number"==typeof a)&&(n+=a+", ")}),t.text(n.slice(0,-2))};a.children("a").click(function(){e.slideToggle("slow"),n(),t.slideToggle()}),n()}),c.change(function(){var a=x(),n=c.val();a.hasOwnProperty("staff_notes")?a.staff_notes={}:(a.staff_notes={},a.staff_notes=n,A(a,!0))}),g.gender){if("f"===g.gender)var P='<span class="i18n">       <span data-lang="en_us">Female</span>       <span data-lang="pt_br">Feminino</span>      </span> ';else"m"===g.gender&&(P='<span class="i18n">       <span data-lang="en_us">Male</span>       <span data-lang="pt_br">Masculino</span>      </span> ');"x"===g.gender&&(P='<span class="i18n">       <span data-lang="en_us">Others</span>       <span data-lang="pt_br">Outros</span>      </span> '),u.append('<span class="i18n">       <span data-lang="en_us">Name</span>       <span data-lang="pt_br">Nome</span>      </span>: '+_+'<br><span class="i18n">       <span data-lang="en_us">Birth Date</span>       <span data-lang="pt_br">Data de Nascimento</span>      </span>: '+y+'<br><span class="i18n">       <span data-lang="en_us">Gender</span>       <span data-lang="pt_br">GÃªnero</span>      </span>: '+P+'<br><span class="i18n">       <span data-lang="en_us">CPF/CNPJ</span>       <span data-lang="pt_br">CPF/CNPJ</span>      </span>: '+g.doc_number),h.append('<span class="i18n">       <span data-lang="en_us">Number of orders</span>       <span data-lang="pt_br">Quantidade de pedidos</span>      </span>: '+g.orders_count+'<br><span class="i18n">       <span data-lang="en_us">Amount of money in order: $</span>       <span data-lang="pt_br">Valor total de pedidos: R$</span>      </span>'+g.orders_total_value+'<br><span class="i18n">       <span data-lang="en_us">Amount of money spent: $</span>       <span data-lang="pt_br">Valor total de pedidos aprovados: R$</span>      </span>'+g.total_spent+'<br><span class="i18n">       <span data-lang="en_us">Amount of money cancelled: $</span>       <span data-lang="pt_br">Valor total de pedidos cancelados: R$</span>      </span>'+g.total_cancelled)}};j.$form?a():$(document).one("form-"+O,a)}();