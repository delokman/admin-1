!function(){"use strict";var O=window.tabId,e=function(){var d=$("#app-tab-"+O),i=0,s=0,c=0,l=d.find("#cards-graphs-amount").find("#dayAmount"),e=d.find("#home-cards"),o=e.find("#home-name"),n=e.find("#home-object"),a=e.find("#home-id"),t=localStorage.getItem("store_id"),u=d.find("#lastOrders").find("#addOrders"),f=d.find("#approved"),m=d.find("#monthAmount"),r=new Date,g=r.getDate(),b=r.getMonth(),p=r.getFullYear(),h=(new Date).getTimezoneOffset(),v=0,w=0,_=0,k=new Date(p,b,g,0,-h,0,0).toISOString(),S=new Date(p,b,g,23,59-h,59,0).toISOString(),y=new Date(p,b,1,0,-h,0,0).toISOString(),A=new Date(p,b,31,23,59-h,59,0).toISOString(),x="orders.json?sort=amount&created_at>="+k+"&created_at<="+S,I="orders.json?sort=amount&created_at>="+y+"&created_at<="+A;a.text(t);window.callApi("stores/me.json","GET",function(e,a){if(!e){var t=a.name;o.text(t);var r=a._id;n.text(r),localStorage.setItem("fromAddress",a.address),localStorage.setItem("fromContact",a.contact_phone),localStorage.setItem("fromName",a.name),localStorage.setItem("fromCorporate",a.corporate_name)}}),$(document).ready(function(){setTimeout(function(){window.callApi(x,"GET",function(e,a){if(!e){var t=a.result;if(t.length){d.find("#cards-graphs-orders").show();for(var r=0;r<t.length;r++)if(v=t[r].amount.total+v,l.text(v.toFixed(2).replace(".",",")),t[r].financial_status){var o=[];switch(o.push(t[r]._id,t[r].number,t[r].financial_status.current,t[r].amount.total.toFixed(2).replace(".",","),t[r].buyers[0]._id,t[r].buyers[0].display_name),o[2]){case"under_analysis":o[2]="Em análise";break;case"authorized":o[2]="Autorizado";break;case"pending":o[2]="Pendente";break;case"refunded":o[2]="Devolvido";break;case"paid":o[2]="Aprovado";break;case"in_dispute":o[2]="Disputa";break;case"voided":o[2]="Cancelado";break;case"unauthorized":o[2]="Não autorizado";break;case"partially_paid":o[2]="Parcialmente Pago";break;case"partially_refunded":o[2]="Parcialmente devolvido";break;case"unknown":o[2]="Desconhecido"}u.append('<tr>  <th scope="row"><a href="/#/resources/orders/'+o[0]+' ">'+o[1]+" </a></th>  <td>"+o[2]+"</td>  <td> R$ "+o[3]+'</td>  <td><a href="/#/resources/customers/'+o[4]+' ">'+o[5]+" </a></td></tr>");var n=t[r].financial_status.current;"paid"===n&&(s+=1),"voided"===n&&(c+=1),"pending"===n&&(i+=1),D(s,i,c)}else r+=1}}})},100)}),$(document).ready(function(){setTimeout(function(){window.callApi(I,"GET",function(e,a){if(!e)for(var t=a.result,r=0;r<t.length;r++)if(t[r].financial_status){var o=t.length;if("paid"===t[r].financial_status.current){_=t[r].amount.total+_,m.text(_.toFixed(2).replace(".",","));var n=((w+=1)/o*100).toFixed(2);f.text(n)}}})},500)});var D=function(){var e=document.getElementById("orderOfAll");new Chart(e,{type:"bar",data:{labels:["Aprovados","Pendentes","Cancelados"],datasets:[{label:"Pedidos",data:[s,i,c],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}};window.Tabs[O].$form?e():$(document).one("form-"+O,e)}();