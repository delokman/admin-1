!function(){"use strict";var f=window.tabId,e=function(){var b=$("#app-tab-"+f),h=0,_=0,v=0,w=b.find("#cards-graphs-amount").find("#dayAmount"),e=b.find("#home-cards"),n=e.find("#home-name"),o=e.find("#home-object"),t=e.find("#home-id"),a=localStorage.getItem("store_id"),S=b.find("#lastOrders").find("#addOrders"),x=b.find("#approved"),I=b.find("#monthAmount"),r=b.find("#cards-graphs-amount-last"),D=b.find("#lastApproved"),A=b.find("#lastMonthAmount"),k=r.find("#lastDayAmount"),i=new Date,d=i.getDate(),s=i.getMonth(),c=i.getFullYear(),l=(new Date).getTimezoneOffset(),y=0,O=0,F=0,C=0,P=0,z=0,T=new Date(c,s,d-1,0,-l,0,0).toISOString(),E=new Date(c,s,d-1,23,59-l,59,0).toISOString(),j=new Date(c,s-1,d,0,-l,0,0).toISOString(),G=new Date(c,s-1,31,23,59-l,59,0).toISOString(),M=new Date(c,s,d,0,-l,0,0).toISOString(),N=new Date(c,s,d,23,59-l,59,0).toISOString(),B=new Date(c,s,1,0,-l,0,0).toISOString(),R=new Date(c,s,31,23,59-l,59,0).toISOString(),u="orders.json?sort=amount&created_at>="+j+"&fields=buyers,amount,_id,created_at,financial_status,number,status";t.text(a);window.callApi("stores/me.json","GET",function(e,t){if(!e){var a=t.name;n.text(a);var r=t._id;o.text(r),localStorage.setItem("fromAddress",t.address),localStorage.setItem("fromContact",t.contact_phone),localStorage.setItem("fromName",t.name),localStorage.setItem("fromCorporate",t.corporate_name),localStorage.setItem("domain",t.domain)}}),$(document).ready(function(){setTimeout(function(){window.callApi(u,"GET",function(e,t){if(!e){console.log(t);var a=t.result.filter(function(e){return e.created_at>=M&&e.created_at<=N}),r=t.result.filter(function(e){return e.created_at>=T&&e.created_at<=E}),n=t.result.filter(function(e){return e.created_at>=B&&e.created_at<=R}),o=t.result.filter(function(e){return e.created_at>=j&&e.created_at<=G});if(n.length)for(var i=0;i<n.length;i++)if(n[i].financial_status){var d=n.length;if("paid"===n[i].financial_status.current){F=n[i].amount.total+F,I.text(F.toFixed(2).replace(".",","));var s=((O+=1)/d*100).toFixed(2);x.text(s)}}if(o.length)for(var c=0;c<o.length;c++)if(o[c].financial_status){var l=o.length;if("paid"===o[c].financial_status.current){z=o[c].amount.total+z,A.text(z.toFixed(2).replace(".",","));var u=((P+=1)/l*100).toFixed(2);D.text(u)}}if(r)for(var f=0;f<r.length;f++)C=r[f].amount.total+C,k.text(C.toFixed(2).replace(".",","));if(a.length){b.find("#cards-graphs-orders").show();for(var m=0;m<a.length;m++)if(y=a[m].amount.total+y,w.text(y.toFixed(2).replace(".",",")),a[m].financial_status){var g=[];switch(g.push(a[m]._id,a[m].number,a[m].financial_status.current,a[m].amount.total.toFixed(2).replace(".",","),a[m].buyers[0]._id,a[m].buyers[0].display_name),g[2]){case"under_analysis":g[2]="Em análise";break;case"authorized":g[2]="Autorizado";break;case"pending":g[2]="Pendente";break;case"refunded":g[2]="Devolvido";break;case"paid":g[2]="Aprovado";break;case"in_dispute":g[2]="Disputa";break;case"voided":g[2]="Cancelado";break;case"unauthorized":g[2]="Não autorizado";break;case"partially_paid":g[2]="Parcialmente Pago";break;case"partially_refunded":g[2]="Parcialmente devolvido";break;case"unknown":g[2]="Desconhecido"}S.append('<tr>  <th scope="row"><a href="/#/resources/orders/'+g[0]+' ">'+g[1]+" </a></th>  <td>"+g[2]+"</td>  <td> R$ "+g[3]+'</td>  <td><a href="/#/resources/customers/'+g[4]+' ">'+g[5]+" </a></td></tr>");var p=a[m].financial_status.current;"paid"===p&&(_+=1),"voided"===p&&(v+=1),"pending"===p&&(h+=1),W(_,h,v)}else m+=1}}})},100)});var W=function(){var e=document.getElementById("orderOfAll");new Chart(e,{type:"bar",data:{labels:["Aprovados","Pendentes","Cancelados"],datasets:[{label:"Pedidos",data:[_,h,v],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}};window.Tabs[f].$form?e():$(document).one("form-"+f,e)}();